"use strict";

require("../common");

var _steps = require("cypress-cucumber-preprocessor/steps");

(0, _steps.Given)('a FileInput with multiple and onChange handler is rendered', () => {
  cy.visitStory('FileInput', 'With onChange and multiple');
});
(0, _steps.When)('the user selected multiple files', () => {
  cy.get('[data-test="dhis2-uicore-fileinput"] input').uploadMultipleFiles([{
    fileType: 'md',
    fixture: 'FileInput/file.md'
  }, {
    fileType: 'txt',
    fixture: 'FileInput/file.txt'
  }], true);
});
(0, _steps.Then)("the onChange handler's payload contains multiple files", () => {
  cy.window().should(win => {
    const calls = win.onChange.getCalls();
    const callArgs = calls[0].args;
    const payload = callArgs[0];
    const files = payload.files;
    expect(files).to.have.lengthOf(2);
    const file1 = files[0];
    expect(file1.name).to.equal('file.md');
    const file2 = files[1];
    expect(file2.name).to.equal('file.txt');
  });
});